<!doctype html>
<html class="no-js" lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Dashboard One | Notika - Notika Admin Template</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- favicon
      ============================================ -->
    <link rel="shortcut icon" type="image/x-icon" href="/static/img/favicon.ico">
    <!-- Google Fonts
      ============================================ -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <!-- Bootstrap CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <!-- Bootstrap CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/font-awesome.min.css">
    <!-- owl.carousel CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/owl.carousel.css">
    <link rel="stylesheet" href="/static/css/owl.theme.css">
    <link rel="stylesheet" href="/static/css/owl.transitions.css">
    <!-- meanmenu CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/meanmenu/meanmenu.min.css">
    <!-- animate CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/animate.css">
    <!-- normalize CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/normalize.css">
    <!-- mCustomScrollbar CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/scrollbar/jquery.mCustomScrollbar.min.css">
    <!-- jvectormap CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/jvectormap/jquery-jvectormap-2.0.3.css">
    <!-- notika icon CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/notika-custom-icon.css">
    <!-- wave CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/wave/waves.min.css">
    <!-- main CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/main.css">
    <!-- style CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/style.css">
    <!-- responsive CSS
      ============================================ -->
    <link rel="stylesheet" href="/static/css/responsive.css">
    <!-- modernizr JS
      ============================================ -->
    <script src="/static/js/vendor/modernizr-2.8.3.min.js"></script>
    <!-- Font Awesome CDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

    
</head>

<body>
    <!--[if lt IE 8]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    {% include "header.html" %}
    <!-- Start Status area -->
    <div class="notika-status-area">
        <div class="container">
            <div class="row">
                <div class="container">
                    <div class="row">
                        <!-- 지도: 맨 위에 단독 배치 -->
                        <div class="col-lg-12 col-md-12 col-sm-12">
                          <div class="notika-shadow mg-tb-30">
                            <h2><i class="fa-solid fa-map-location-dot"></i> 서울시 병원 분포</h2>
                            <div id="map" style="width:100%;height:370px;"></div>
                          </div>
                        </div>
                      
                        <!-- 질병 설명 -->
                        <div class="col-lg-6 col-md-6 col-sm-12">
                          <div class="notika-shadow mg-tb-30">
                            <h2><i class="fa-solid fa-temperature-low"></i>Temperature Variation</h2>
                            <p>일교차에 따른 상관관계</p>
                          </div>
                          <div class="notika-shadow mg-tb-30">
                            <h2><i class="fa-solid fa-head-side-cough"></i>Asthma</h2>
                            <p>천식 발생 혹은 악화의 원인</p>
                          </div>
                          <div class="notika-shadow mg-tb-30">
                            <h2><i class="fa-solid fa-stethoscope"></i>Dermatitis</h2>
                            <p>피부염 발생의 원인</p>
                          </div>
                        </div>
                      
                        <!-- 카테고리 네비게이션 -->
                        <div class="col-lg-6 col-md-6 col-sm-12 navg">
                          <div class="notika-shadow mg-tb-30">
                            <h2><i class="fa-solid fa-virus-covid"></i>COVID-19</h2>
                            <p>연령대별 코로나 확진 경향 분석</p>
                          </div>
                          <div class="notika-shadow mg-tb-30">
                            <h2><i class="fa-solid fa-people-group"></i>Population</h2>
                            <p>질병 발생률과 지역 인구수 상관관계</p>
                          </div>
                          <div class="notika-shadow mg-tb-30">
                            <h2><i class="fa-solid fa-compass"></i>Category Navigation</h2>
                            <ul style="list-style: none; padding-left: 0;">
                              <li><i class="fa fa-users"></i> Population/Disease Statistics</li>
                              <li><i class="fa fa-heartbeat"></i> Health vs External Factors</li>
                              <li><i class="fa fa-asterisk"></i> COVID-19 Analysis</li>
                            </ul>
                          </div>
                        </div>
                      </div>

                      <!-- 차트 + 슬라이더 문구 한 줄로 정렬 -->
                      <div class="row">
                        <!-- 왼쪽: 라인차트 -->
                        <div class="col-lg-6">
                          <div class="notika-shadow mg-tb-30">
                            <h2 style="font-size: 18px;">시간 흐름에 따른 팀원 기분 변화</h2>
                            <div class="chart-container" style="position: relative; width:100%; max-width:100%;">
                              <canvas id="lineChart" style="height:300px; width:100%;"></canvas>
                            </div>
                          </div>
                        </div>
                    
                      <!-- 오른쪽: 슬라이더 + 말풍선 -->
                      <div class="col-lg-6 d-flex align-items-center justify-content-center">
                        <div class="notika-shadow mg-tb-30 p-4" style="width: 100%; max-width: 400px;">
                          <!-- 말풍선 텍스트 -->
                          <div id="balloon" style="
                            background-color:#00c292;
                            color:white;
                            padding: 15px 20px;
                            border-radius: 10px;
                            display: inline-block;
                            position: relative;
                            font-weight: bold;
                            font-size: 14px;
                          ">
                            시간별 우리의 기분이 어떨지 확인해 보아요
                            <div style="
                              position: absolute;
                              bottom: -10px;
                              left: 20px;
                              width: 0;
                              height: 0;
                              border-left: 10px solid transparent;
                              border-right: 10px solid transparent;
                              border-top: 10px solid #00c292;
                            "></div>
                          </div>
                      
                          <!-- 슬라이더 -->
                          <div style="margin-top: 30px;">
                            <div style="display: grid; grid-template-columns: repeat(10, 1fr); font-size: 13px; color: #333;">
                              <span style="text-align: center;">09:00</span>
                              <span style="text-align: center;">10:00</span>
                              <span style="text-align: center;">11:00</span>
                              <span style="text-align: center;">12:00</span>
                              <span style="text-align: center;">13:00</span>
                              <span style="text-align: center;">14:00</span>
                              <span style="text-align: center;">15:00</span>
                              <span style="text-align: center;">16:00</span>
                              <span style="text-align: center;">17:00</span>
                              <span style="text-align: center;">18:00</span>
                            </div>
                            <input id="moodSlider" type="range" min="1" max="10" value="4"
                              style="width: 100%; margin-top: 10px; accent-color: #00c292;" />
                          </div>
                        </div>
                        </div>
                      </div>
                    </div>
                  </div>
            </div>
        </div>
    </div>
    <!-- End Status area-->

    <!-- 라인차트 JS -->
    <script>
    window.onload = function () {
        const ctx = document.getElementById('lineChart').getContext('2d');
        const slider = document.getElementById('moodSlider');  // 슬라이더 요소
        const balloonText = document.getElementById('balloon');  // 말풍선 텍스트 요소
        const timeLabels = ['09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'];  // 시간대 배열

        // 랜덤 기분 점수 리스트 생성
        function getRandomScoreList(count = 10) {
          return Array.from({ length: count }, () => Math.floor(Math.random() * 101));
        }

        // 랜덤 기분 데이터 생성
        const scores = {
          '경보': getRandomScoreList(),
          '영서': getRandomScoreList(),
          '윤환': getRandomScoreList()
        };

        const colors = {
          '경보': 'rgba(255,99,132,1)',
          '영서': 'rgba(54, 162, 235, 1)',
          '윤환': 'rgba(75, 192, 192, 1)'
        };

        // 각 팀원의 기분 점수 반환
        function getScatterData(timeIndex) {
          let i = 0;
          return Object.entries(scores).map(([name, list]) => ({
            label: name,
            data: [{ x: list[timeIndex], y: name }],  // x축에 점수, y축에 팀원 이름
            backgroundColor: colors[name],
            pointRadius: 7,
            showLine: false
          }));
        }

        // Scatter 차트 초기화
        const scatterChart = new Chart(ctx, {
          type: 'scatter',
          data: {
            datasets: getScatterData(0)
          },
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: `${timeLabels[0]} 의 기분 점수`
              }
            },
            scales: {
              x: {
                beginAtZero: true,
                max: 100,
                title: {
                  display: true,
                  text: '기분 점수'
                },
                ticks: {
                  callback: value => value + '점'
                }
              },
              y: {
                type: 'category',
                labels: Object.keys(scores),
                title: {
                  display: true,
                  text: '팀원'
                }
              }
            }
          }
        });

        // 슬라이더 이벤트 처리
        slider.addEventListener('input', () => {
          const index = parseInt(slider.value) - 1;  // 슬라이더 값에서 1을 빼서 0~9 인덱스로 변환

          // 선택된 시간에 대한 텍스트 업데이트
          const selectedTime = timeLabels[index];
          balloonText.textContent = `${selectedTime}에 우리 기분은??`;

          // 차트 데이터 업데이트
          scatterChart.data.datasets = getScatterData(index);
          scatterChart.options.plugins.title.text = `${selectedTime} 의 기분 점수`;
          scatterChart.update();
        });

        // 페이지 로드 시, 초기 슬라이더 값에 맞는 텍스트 및 차트 설정
        const initialIndex = parseInt(slider.value) - 1;  // 초기 슬라이더 값에 맞는 인덱스 계산
        balloonText.textContent = `시간별 우리 기분을 알아볼래?`;  // 초기 텍스트 설정
        scatterChart.data.datasets = getScatterData(initialIndex);  // 초기 차트 데이터 설정
        scatterChart.update();  // 차트 업데이트
      };
    </script>
    

    </script>

    <!-- End Footer area-->
    <!-- jquery
      ============================================ -->
    <script src="/static/js/vendor/jquery-1.12.4.min.js"></script>
    <!-- bootstrap JS
      ============================================ -->
    <script src="/static/js/bootstrap.min.js"></script>
    <!-- wow JS
      ============================================ -->
    <script src="/static/js/wow.min.js"></script>
    <!-- price-slider JS
      ============================================ -->
    <script src="/static/js/jquery-price-slider.js"></script>
    <!-- owl.carousel JS
      ============================================ -->
    <script src="/static/js/owl.carousel.min.js"></script>
    <!-- scrollUp JS
      ============================================ -->
    <script src="/static/js/jquery.scrollUp.min.js"></script>
    <!-- meanmenu JS
      ============================================ -->
    <script src="/static/js/meanmenu/jquery.meanmenu.js"></script>
    <!-- counterup JS
      ============================================ -->
    <script src="/static/js/counterup/jquery.counterup.min.js"></script>
    <script src="/static/js/counterup/waypoints.min.js"></script>
    <script src="/static/js/counterup/counterup-active.js"></script>
    <!-- mCustomScrollbar JS
      ============================================ -->
    <script src="/static/js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
    <!-- jvectormap JS
      ============================================ -->
    <script src="/static/js/jvectormap/jquery-jvectormap-2.0.2.min.js"></script>
    <script src="/static/js/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <script src="/static/js/jvectormap/jvectormap-active.js"></script>
    <!-- sparkline JS
      ============================================ -->
    <script src="/static/js/sparkline/jquery.sparkline.min.js"></script>
    <script src="/static/js/sparkline/sparkline-active.js"></script>
    <!-- sparkline JS
      ============================================ -->
    <script src="/static/js/flot/jquery.flot.js"></script>
    <script src="/static/js/flot/jquery.flot.resize.js"></script>
    <script src="/static/js/flot/curvedLines.js"></script>
    <script src="/static/js/flot/flot-active.js"></script>
    <!-- knob JS
      ============================================ -->
    <script src="/static/js/knob/jquery.knob.js"></script>
    <script src="/static/js/knob/jquery.appear.js"></script>
    <script src="/static/js/knob/knob-active.js"></script>
    <!--  wave JS
      ============================================ -->
    <script src="/static/js/wave/waves.min.js"></script>
    <script src="/static/js/wave/wave-active.js"></script>
    <!--  todo JS
      ============================================ -->
    <script src="/static/js/todo/jquery.todo.js"></script>
    <!-- plugins JS
      ============================================ -->
    <script src="/static/js/plugins.js"></script>
   <!--  Chat JS
      ============================================ -->
    <script src="/static/js/chat/moment.min.js"></script>
    <script src="/static/js/chat/jquery.chat.js"></script>
    <!-- main JS
      ============================================ -->
    <script src="/static/js/main.js"></script>
   <!-- tawk chat JS
      ============================================ -->
    <!-- <script src="/static/js/tawk-chat.js"></script> -->

  <!-- Chart.js CDN 추가 (이건 꼭 필요해!) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3871f82b95473bb9ec490756149ff6e9&libraries=services"></script>
    <script>
    // 마커를 클릭하면 장소명을 표출할 인포윈도우 입니다
    var infowindow = new kakao.maps.InfoWindow({zIndex:1});

    var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
        mapOption = {
            center: new kakao.maps.LatLng(37.518255263421, 126.90642790923181), // 지도의 중심좌표
            level: 2 // 지도의 확대 레벨
        };  

    // 지도를 생성합니다    
    var map = new kakao.maps.Map(mapContainer, mapOption); 

    // 장소 검색 객체를 생성합니다
    var ps = new kakao.maps.services.Places(map); 

    // 카테고리로 은행을 검색합니다
    ps.categorySearch('HP8', placesSearchCB, {useMapBounds:true}); 

    // 키워드 검색 완료 시 호출되는 콜백함수 입니다
    function placesSearchCB (data, status, pagination) {
        if (status === kakao.maps.services.Status.OK) {
            for (var i=0; i<data.length; i++) {
                displayMarker(data[i]);    
            }       
        }
    }

    // 지도에 마커를 표시하는 함수입니다
    function displayMarker(place) {
        // 마커를 생성하고 지도에 표시합니다
        var marker = new kakao.maps.Marker({
            map: map,
            position: new kakao.maps.LatLng(place.y, place.x) 
        });

        // 마커에 클릭이벤트를 등록합니다
        kakao.maps.event.addListener(marker, 'click', function() {
            // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
            infowindow.setContent('<div style="padding:5px;font-size:12px;">' + place.place_name + '</div>');
            infowindow.open(map, marker);
        });
    }
    </script>
</body>

</html>